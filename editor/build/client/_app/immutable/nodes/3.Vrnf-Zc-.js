import{r as H,s as Q,n as J,o as R}from"../chunks/scheduler.BvLojk_z.js";import{t as W,S as X,i as Y,e as I,s as D,c as T,j as q,g as B,b as M,h as v,f as U,k as C,m as S,n as z,o as F,d as j,q as V,l as A}from"../chunks/index.BdNWYI4b.js";import{g as Z}from"../chunks/entry.COJlGQeR.js";function x(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function $(n,t){n.d(1),t.delete(n.key)}function ee(n,t,e,c,f,s,i,r,o,_,p,b){let l=n.length,a=s.length,y=l;const u={};for(;y--;)u[n[y].key]=y;const h=[],k=new Map,d=new Map,g=[];for(y=a;y--;){const m=b(f,s,y),N=e(m);let E=i.get(N);E?g.push(()=>E.p(m,t)):(E=_(N,m),E.c()),k.set(N,h[y]=E),N in u&&d.set(N,Math.abs(y-u[N]))}const w=new Set,O=new Set;function L(m){W(m,1),m.m(r,p),i.set(m.key,m),p=m.first,a--}for(;l&&a;){const m=h[a-1],N=n[l-1],E=m.key,P=N.key;m===N?(p=m.first,l--,a--):k.has(P)?!i.has(E)||w.has(E)?L(m):O.has(P)?l--:d.get(E)>d.get(P)?(O.add(E),L(m)):(w.add(P),l--):(o(N,i),l--)}for(;l--;){const m=n[l];k.has(m.key)||o(m,i)}for(;a;)L(h[a-1]);return H(g),h}function G(n,t,e){const c=n.slice();return c[15]=t[e],c}function te(n){let t,e,c=n[15].name+"",f,s,i=n[15].description+"",r,o,_,p,b="Edit",l,a,y="Delete",u,h;function k(){return n[12](n[15])}function d(){return n[13](n[15])}return{c(){t=I("div"),e=I("a"),f=z(c),s=z(" - "),r=z(i),_=D(),p=I("button"),p.textContent=b,l=D(),a=I("button"),a.textContent=y,this.h()},l(g){t=T(g,"DIV",{});var w=q(t);e=T(w,"A",{href:!0});var O=q(e);f=F(O,c),s=F(O," - "),r=F(O,i),O.forEach(v),_=M(w),p=T(w,"BUTTON",{"data-svelte-h":!0}),B(p)!=="svelte-hb6164"&&(p.textContent=b),l=M(w),a=T(w,"BUTTON",{"data-svelte-h":!0}),B(a)!=="svelte-1rddz8i"&&(a.textContent=y),w.forEach(v),this.h()},h(){j(e,"href",o=`./items/${n[15].id}`)},m(g,w){U(g,t,w),C(t,e),C(e,f),C(e,s),C(e,r),C(t,_),C(t,p),C(t,l),C(t,a),u||(h=[S(p,"click",k),S(a,"click",d)],u=!0)},p(g,w){n=g,w&1&&c!==(c=n[15].name+"")&&V(f,c),w&1&&i!==(i=n[15].description+"")&&V(r,i),w&1&&o!==(o=`./items/${n[15].id}`)&&j(e,"href",o)},d(g){g&&v(t),u=!1,H(h)}}}function ne(n){let t,e,c,f,s,i="Save",r,o,_="Cancel",p,b;return{c(){t=I("input"),e=D(),c=I("input"),f=D(),s=I("button"),s.textContent=i,r=D(),o=I("button"),o.textContent=_,this.h()},l(l){t=T(l,"INPUT",{type:!0,placeholder:!0}),e=M(l),c=T(l,"INPUT",{type:!0,placeholder:!0}),f=M(l),s=T(l,"BUTTON",{"data-svelte-h":!0}),B(s)!=="svelte-jlu80t"&&(s.textContent=i),r=M(l),o=T(l,"BUTTON",{"data-svelte-h":!0}),B(o)!=="svelte-qcjznm"&&(o.textContent=_),this.h()},h(){j(t,"type","text"),j(t,"placeholder","Name"),j(c,"type","text"),j(c,"placeholder","Description")},m(l,a){U(l,t,a),A(t,n[2]),U(l,e,a),U(l,c,a),A(c,n[3]),U(l,f,a),U(l,s,a),U(l,r,a),U(l,o,a),p||(b=[S(t,"input",n[8]),S(c,"input",n[9]),S(s,"click",n[10]),S(o,"click",n[11])],p=!0)},p(l,a){a&4&&t.value!==l[2]&&A(t,l[2]),a&8&&c.value!==l[3]&&A(c,l[3])},d(l){l&&(v(t),v(e),v(c),v(f),v(s),v(r),v(o)),p=!1,H(b)}}}function K(n,t){let e,c;function f(r,o){return r[1]===r[15].id?ne:te}let s=f(t),i=s(t);return{key:n,first:null,c(){e=I("li"),i.c(),c=D(),this.h()},l(r){e=T(r,"LI",{});var o=q(e);i.l(o),c=M(o),o.forEach(v),this.h()},h(){this.first=e},m(r,o){U(r,e,o),i.m(e,null),C(e,c)},p(r,o){t=r,s===(s=f(t))&&i?i.p(t,o):(i.d(1),i=s(t),i&&(i.c(),i.m(e,c)))},d(r){r&&v(e),i.d()}}}function le(n){let t,e,c="Items",f,s,i="Create New Item",r,o,_=[],p=new Map,b,l,a=x(n[0]);const y=u=>u[15].id;for(let u=0;u<a.length;u+=1){let h=G(n,a,u),k=y(h);p.set(k,_[u]=K(k,h))}return{c(){t=I("main"),e=I("h1"),e.textContent=c,f=D(),s=I("button"),s.textContent=i,r=D(),o=I("ul");for(let u=0;u<_.length;u+=1)_[u].c()},l(u){t=T(u,"MAIN",{});var h=q(t);e=T(h,"H1",{"data-svelte-h":!0}),B(e)!=="svelte-iklybq"&&(e.textContent=c),f=M(h),s=T(h,"BUTTON",{"data-svelte-h":!0}),B(s)!=="svelte-1itnyfa"&&(s.textContent=i),r=M(h),o=T(h,"UL",{});var k=q(o);for(let d=0;d<_.length;d+=1)_[d].l(k);k.forEach(v),h.forEach(v)},m(u,h){U(u,t,h),C(t,e),C(t,f),C(t,s),C(t,r),C(t,o);for(let k=0;k<_.length;k+=1)_[k]&&_[k].m(o,null);b||(l=S(s,"click",n[7]),b=!0)},p(u,[h]){h&127&&(a=x(u[0]),_=ee(_,h,y,1,u,a,p,o,$,K,null,G))},i:J,o:J,d(u){u&&v(t);for(let h=0;h<_.length;h+=1)_[h].d();b=!1,l()}}}function ie(n,t,e){let c=[],f=null,s="",i="";async function r(){try{const d=await fetch("/api/items");if(!d.ok)throw new Error("Failed to fetch items");e(0,c=await d.json())}catch(d){console.error(d)}}async function o(d){try{if(!(await fetch(`/api/items/${d}`,{method:"DELETE"})).ok)throw new Error("Failed to delete item");e(0,c=c.filter(w=>w.id!==d))}catch(g){console.error(g)}}async function _(){console.log(`Updating item with ID: ${f} Name: ${s} Desc: ${i}`),await fetch(`/api/items/${f}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s,description:i})}),await r(),e(1,f=null),e(2,s=""),e(3,i="")}function p(d){e(1,f=d.id),e(2,s=d.name),e(3,i=d.description)}R(r);const b=()=>Z("/api/items/new");function l(){s=this.value,e(2,s)}function a(){i=this.value,e(3,i)}return[c,f,s,i,o,_,p,b,l,a,async()=>{await _()},()=>{e(1,f=null),e(2,s=""),e(3,i="")},d=>p(d),d=>o(d.id)]}class ae extends X{constructor(t){super(),Y(this,t,ie,le,Q,{})}}export{ae as component};
